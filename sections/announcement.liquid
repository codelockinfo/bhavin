{%- if section.settings.enable_bar -%}
  {%- unless section.settings.home_page_only and template != 'index' -%}
    <section id="section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="announcement-bar">
      <div id="sticky-anchor"></div>
      <div class="AnnouncementBar">
        <div class="AnnouncementBar__Wrapper">
          <p class="AnnouncementBar__Content Heading">
            {%- if section.settings.link -%}
              <a href="{{ section.settings.link }}">{{ section.settings.content | escape }}</a>
            {%- else -%}
              {{ section.settings.content | escape }}
            {%- endif -%}
          </p>
        </div>
        <div class="globalprivate">
          <div class="announc_flex cfrygvgybygh anunceglobal">
            <div class="annuncefle1">
              <div class="globalward">
                <a href="{{ section.settings.handm1 }}">
                  <img src="{{ section.settings.kom_clape1| img_url:'master' }}" class="global globalmain">
                </a>
              </div>
            </div>
            <div class="annuncefle1 hide-mobile">
              <div class="globalward">
                <a href="{{ section.settings.handm }}">
                  <img src="{{ section.settings.kom_clape2| img_url:'master' }}" class="global">
                </a>
              </div>
            </div>
            <div class="annuncefle1">
              <div class="globalward">
                <a href="{{ section.settings.handm1 }}">
                  <img src="{{ section.settings.kom_clape1| img_url:'master' }}" class="global globalmain">
                </a>
              </div>
            </div>
            <div class="annuncefle1 hide-mobile">
              <div class="globalward">
                <a href="{{ section.settings.handm }}">
                  <img src="{{ section.settings.kom_clape2| img_url:'master' }}" class="global">
                </a>
              </div>
            </div>
            <div class="annuncefle1">
              <div class="globalward">
                <a href="{{ section.settings.handm1 }}">
                  <img src="{{ section.settings.kom_clape1| img_url:'master' }}" class="global globalmain">
                </a>
              </div>
            </div>
            <div class="annuncefle1 hide-mobile">
              <div class="globalward">
                <a href="{{ section.settings.handm }}">
                  <img src="{{ section.settings.kom_clape2| img_url:'master' }}" class="global">
                </a>
              </div>
            </div>
            <div class="annuncefle1">
              <div class="globalward">
                <a href="{{ section.settings.handm1 }}">
                  <img src="{{ section.settings.kom_clape1| img_url:'master' }}" class="global globalmain">
                </a>
              </div>
            </div>
            <div class="annuncefle1 hide-mobile">
              <div class="globalward">
                <a href="{{ section.settings.handm }}">
                  <img src="{{ section.settings.kom_clape2| img_url:'master' }}" class=" global">
                </a>
              </div>
            </div>
            <div class="annuncefle1">
              <div class="globalward">
                <a href="{{ section.settings.handm1 }}">
                  <img src="{{ section.settings.kom_clape1| img_url:'master' }}" class="global globalmain">
                </a>
              </div>
            </div>
            <div class="annuncefle1 hide-mobile">
              <div class="globalward">
                <a href="{{ section.settings.handm }}">
                  <img src="{{ section.settings.kom_clape2| img_url:'master' }}" class="global">
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!--
      <style>
        #section-{{ section.id }} {
          background: {{ section.settings.background }};
          color: {{ section.settings.text_color }};
        }
      </style>
    -->

    <script>
      document.documentElement.style.setProperty('--announcement-bar-height', document.getElementById('shopify-section-announcement').offsetHeight + 'px');
    </script>
  {%- endunless -%}
{%- endif -%}

{% schema %}
{
  "name": "Announcement bar",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_bar",
      "label": "Enable bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "home_page_only",
      "label": "Home page only",
      "default": false
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "content",
      "label": "Text",
      "default": "Announce something here"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    },
        {
   "id": "kom_clape1",
   "type": "image_picker",
    "label": "Announcement Image1"
   },
        {
   "id": "kom_clape2",
   "type": "image_picker",
    "label": "Announcement Image2"
   }


  ]
}
{% endschema %}

<style>
  .globalprivate{
    width: 100%;
    overflow: hidden;
  }
    .sticky{
    position:fixed;
    top:0px;
    width:100%;
    animation: fadeInAnimation ease 2s;
  }
    .AnnouncementBar__Content{
          background-color: #efefef;
    }
    .AnnouncementBar{
          z-index: 999;
    }

  .anunceglobal{
            width: calc(150px * 25);
      display: flex;
      animation: scroll 20s linear infinite;
      justify-content: space-between;
  }
  /*   .globalprivate {
      width: 100%;
      overflow: hidden;
  } */
  @keyframes scroll {
    0% {
      transform: translateX(0px);
    }
    100% {
      transform: translateX(calc(-150px * 10));
    }
  }
@keyframes fadeInAnimation {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
     }
}
  @keyframes fadeOut {
            0% {opacity: 1;}
            100% {opacity: 0;}
         }
      @media(max-width:540px){
        .anunceglobal{
            width: calc(100px * 25);
        }
      }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

// var header = document.getElementById('section-announcement');

// function fadeOutOnScroll(element) {
//   if (!element) {
//     return;
//   }
  
//   var distanceToTop = window.pageYOffset + element.getBoundingClientRect().top + 150;
//   var elementHeight = element.offsetHeight;
//   var scrollTop = document.documentElement.scrollTop;
  
//   var opacity = 1;
  
//   if (scrollTop > distanceToTop) {
//     opacity = 1 - (scrollTop - distanceToTop) / elementHeight;
//   }
  
//   if (opacity >= 0) {
//     element.style.opacity = opacity;
//   }
// }

// function scrollHandler() {
//   fadeOutOnScroll(header);
// }

// window.addEventListener('scroll', scrollHandler);
  
  //   function sticky_relocate() {
  //       var window_top = $(window).scrollTop() + 0;
  //       var div_top = $('#sticky-anchor').offset().top + 150;
  //         if (window_top > div_top) {
  //           $('.AnnouncementBar').addClass('sticky');
  //         }
  //         else{
  //           $('.AnnouncementBar').removeClass('sticky');
  //         }
  //       }

  // $(function() {
  //       $(window).scroll(sticky_relocate);
  //       sticky_relocate();
  //       });
</script>
